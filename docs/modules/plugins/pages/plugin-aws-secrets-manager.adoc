= AWS Secrets Manager

The plugin provides functionality to interact with https://aws.amazon.com/secrets-manager/[Amazon Secrets Manager].

:plugin-short-name: aws-secrets-manager
include::partial$plugin-installation.adoc[]

include::partial$aws.adoc[]

== How to refer AWS secrets

=== Configuration

[cols="1,1,3", options="header"]
|===
|Property name
|Default
|Description

|[subs=+quotes]`secrets-manager.aws-secrets-manager.enabled`
|`true`
|Defines whether VIVIDUS retrieves secrets from AWS Secrets Manager. If set to `false`, values from AWS Secrets Manager will not be retrieved. Can be used when access to AWS Secrets Manager is restricted, e.g. for local debugging, to override only the required properties instead of all processed ones.

|===

. Find the required secret in the list.
+
image::aws_secrets.png[AWS Secrets]

. Put the name to properties using the case-sensitive wrapping `AWS_SECRETS_MANAGER(...)`
+
Property value format:
+
[source,properties]
----
AWS_SECRETS_MANAGER(<profile>, <secret>/<secret_name>)
----
+
Where:
+
* `profile` - *[optional]* The https://docs.aws.amazon.com/cli/v1/userguide/cli-configure-files.html#cli-configure-files-format-profile[AWS profile].
+
* `secret` - The ID of the secret to retrieve.
+
* `secret_name` - The secret name within the secret container.
+
[source,properties]
----
db.connection.test.username=AWS_SECRETS_MANAGER(my_secret/dev/username)
db.connection.test.password=AWS_SECRETS_MANAGER(my_profile, my_secret/dev/password)
----
